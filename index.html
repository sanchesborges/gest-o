<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>Man√° - Gest√£o de Produtos</title>
    <meta name="description" content="Sistema completo de gest√£o para padarias e distribuidoras de produtos congelados" />
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <link rel="icon" type="image/svg+xml" sizes="16x16" href="/favicon-16x16.svg" />
    <link rel="icon" type="image/svg+xml" sizes="32x32" href="/favicon-32x32.svg" />
    <link rel="alternate icon" href="/favicon.ico" />
    <link rel="shortcut icon" href="/favicon.ico" />
    
    <!-- PWA Configuration -->
    <!-- Manifest ser√° gerado pelo plugin e servido como /manifest.webmanifest -->
    <meta name="theme-color" content="#5B6B9E" />
    <meta name="mobile-web-app-capable" content="yes" />
    
    <!-- iOS Configuration -->
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="apple-mobile-web-app-title" content="Man√°" />
    <link rel="apple-touch-icon" href="/logo-mana.png" />
    
    <!-- Microsoft Configuration -->
    <meta name="msapplication-TileColor" content="#5B6B9E" />
    <meta name="msapplication-tap-highlight" content="no" />

    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        darkMode: 'class',
        theme: {
          extend: {
            colors: {
              'brand-primary': '#5B6B9E',
              'brand-secondary': '#A8D96E',
              'brand-light': '#f0f9ff',
              'brand-dark': '#1e293b',
              'brand-accent': '#f59e0b',
            },
          }
        }
      }
    </script>
  <script type="importmap">
{
  "imports": {
    "react/": "https://aistudiocdn.com/react@^19.1.1/",
    "react": "https://aistudiocdn.com/react@^19.1.1",
    "react-router-dom": "https://aistudiocdn.com/react-router-dom@^7.9.2",
    "react-dom/": "https://aistudiocdn.com/react-dom@^19.1.1/",
    "@google/genai": "https://aistudiocdn.com/@google/genai@^1.20.0",
    "jspdf": "https://aistudiocdn.com/jspdf@^3.0.3",
    "lucide-react": "https://aistudiocdn.com/lucide-react@^0.544.0",
    "recharts": "https://aistudiocdn.com/recharts@^3.2.1",
    "react-signature-canvas": "https://aistudiocdn.com/react-signature-canvas@^1.1.0-alpha.2"
  }
}
</script>
</head>
  <body>
    <noscript>Voc√™ precisa habilitar o JavaScript para rodar este aplicativo.</noscript>
    <div id="root"></div>
    
    <!-- REMOVER SERVICE WORKER QUE EST√Å CAUSANDO PROBLEMAS -->
    <script>
      console.log('üßπ Verificando Service Workers...');
      
      if ('serviceWorker' in navigator) {
        navigator.serviceWorker.getRegistrations().then(function(registrations) {
          if (registrations.length > 0) {
            console.log('‚ö†Ô∏è Service Workers encontrados:', registrations.length);
            for(let registration of registrations) {
              registration.unregister().then(function(success) {
                if (success) {
                  console.log('‚úÖ Service Worker removido');
                }
              });
            }
          } else {
            console.log('‚úÖ Nenhum Service Worker ativo');
          }
        });
      }
      
      // Limpar caches antigos
      if ('caches' in window) {
        caches.keys().then(function(names) {
          if (names.length > 0) {
            console.log('üóëÔ∏è Limpando', names.length, 'caches...');
            for (let name of names) {
              caches.delete(name);
            }
          }
        });
      }

      // Garantir que nenhum SW ser√° registrado
      window.addEventListener('load', () => {
        if ('serviceWorker' in navigator) {
          navigator.serviceWorker.getRegistrations().then(function(registrations) {
            registrations.forEach(reg => reg.unregister());
          });
        }
      });
      
      // Aplicar regras de dark mode AP√ìS Tailwind carregar
      window.addEventListener('load', function() {
        console.log('üé® Aplicando dark mode fix...');
        
        // Aguardar um pouco para garantir que Tailwind processou tudo
        setTimeout(function() {
          const style = document.createElement('style');
          style.id = 'dark-mode-fix-final';
          style.textContent = `
            /* DARK MODE FIX - √öLTIMA PALAVRA */
            .dark .text-gray-800,
            .dark h1.text-gray-800,
            .dark h2.text-gray-800,
            .dark h3.text-gray-800,
            .dark .text-gray-800.dark\\:text-gray-100 {
              color: #f1f5f9 !important;
            }
            
            .dark .text-gray-900,
            .dark h1.text-gray-900,
            .dark h2.text-gray-900,
            .dark .text-gray-900.dark\\:text-white {
              color: #ffffff !important;
            }
            
            .dark h1, .dark h2, .dark h3 {
              color: #f1f5f9 !important;
            }
          `;
          document.head.appendChild(style);
          console.log('‚úÖ Dark mode fix aplicado!');
          
          // For√ßar re-render
          if (document.documentElement.classList.contains('dark')) {
            console.log('üåô Dark mode est√° ATIVO');
            document.querySelectorAll('h1, h2, h3').forEach(el => {
              console.log('T√≠tulo encontrado:', el.textContent.substring(0, 30), 'Color:', window.getComputedStyle(el).color);
            });
          }
        }, 500);
      });
    </script>
    
    <script type="module" src="/index.tsx"></script>
  </body>
</html>